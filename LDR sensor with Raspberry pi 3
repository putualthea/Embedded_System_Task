# Import library
import RPi.GPIO as GPIO       # Menggunakan modul RPi.GPIO untuk mengontrol GPIO pada raspi
import time                   # Import module time untuk delay script saat dibutuhkan

# Deklarasi variabel
GPIO.setmode(GPIO.BOARD)      # Deklarasi penomoran dari fisik pin, setmode digunakan untuk mengaktifkan penomoran yang dimaksud
delayt = 3                    # Deklarasi variabel delay untuk jeda nyala mati lampu
value = 0                     # Deklarasi nilai perhitungan dimulai dari "0"
ldr = 16                      # Deklarasi pin pada sensor LDR
lamp = 18                     # Deklarasi pin pada lampu

# Setting mode pin
GPIO.setup(lamp, GPIO.OUT)    # Pin lampu(18) digunakan sebagai Output

# Digital output
GPIO.output(lamp, False)      # Untuk menuliskan value High/Low bisa juga pakai True/False

def rc_time(ldr):             # Function pada LDR untuk perhitungan dengan menginisiasi variabel count
	count=0                     # Count dimulai dari O

	# Output pin
  GPIO.setup(ldr, GPIO.OUT)   # Mengatur pin LDR agar bertindak sebagai Output
	GPIO.output(ldr, False)     # Pada output kondisi LDR menjadi False/Low
	time.sleep(delayt)          # Mengaktifkan skrip delayt selama 3 detik

	# Input pin
  GPIO.setup(ldr, GPIO.IN)    # Mengatur pin LDR agar bertindak sebagai Input

	# Pengaturan loop sementara sampai kondisi True/High
  while(GPIO.input(ldr) == 0):
		count +=1

	return count

try:
  # Loop utama
	while True:                 # Ketika sudah sampai kondisi True/High maka akan pindah ke loop utama                   
		print("Ldr value:")
		value = rc_time(ldr)
		print(value)

		if(value <=10000):
			print("lampu menyala")
			GPIO.output(lamp, True)

		if(value > 10000):
			print("lampu mati")
			GPIO.output(lamp, False)

finally:
	GPIO.cleanup()
